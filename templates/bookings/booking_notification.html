{% load humanize %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>New Booking Notification - Hotel per Hour</title>
</head>
<body style="margin:0; padding:20px; background-color:#f8f9fa; font-family: Arial, sans-serif; line-height:1.6;">

  <!-- Main container -->
  <table role="presentation" cellspacing="0" cellpadding="0" border="0" align="center" width="100%" style="max-width:600px; background-color:#ffffff; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,0.1);">
    <tr>
      <td style="padding:0;">

        <!-- Header -->
        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="background:linear-gradient(135deg,#28a745,#20c997); color:#ffffff; text-align:center;">
          <tr>
            <td style="padding:30px 20px;">
              <h1 style="margin:0; font-size:28px; font-weight:600; font-family:Arial, sans-serif;">Hotel per Hour</h1>
              <p style="margin:5px 0 0; font-size:14px; opacity:0.9;">Your Trusted Hourly Booking Platform</p>
              <div style="background-color:rgba(255,255,255,0.2); width:80px; height:80px; border-radius:50%; text-align:center; line-height:80px; font-size:40px; margin:20px auto 0;">
                ✓
              </div>
            </td>
          </tr>
        </table>

        <!-- Content -->
        <table role="presentation" width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td style="padding:40px 30px; text-align:center;">
              <h2 style="color:#28a745; font-size:32px; margin:0 0 20px; font-weight:700;">New Booking Received!</h2>
              <p style="color:#495057; font-size:16px; margin:15px 0;">
                A new booking has been made for your hotel.
              </p>

              <!-- Booking Info -->
              <div style="background-color:#f8f9fa; border-radius:8px; padding:20px; margin:25px 0; border-left:4px solid #28a745; text-align:left;">
                <div style="font-size:20px; font-weight:600; color:#2c3e50; margin-bottom:15px;">{{ booking.room.hotel.name }}</div>
                <p style="margin:10px 0; font-size:16px; color:#495057;"><strong style="color:#2c3e50;">Booking Reference:</strong> {{ booking.booking_reference }}</p>
                <p style="margin:10px 0; font-size:16px; color:#495057;"><strong style="color:#2c3e50;">Customer:</strong> {{ booking.name }}</p>
                <p style="margin:10px 0; font-size:16px; color:#495057;"><strong style="color:#2c3e50;">Check-in:</strong> {{ booking.check_in }}</p>
                <p style="margin:10px 0; font-size:16px; color:#495057;"><strong style="color:#2c3e50;">Check-out:</strong> {{ booking.check_out }}</p>
                <p style="margin:10px 0; font-size:16px; color:#495057;"><strong style="color:#2c3e50;">Total Hours:</strong> {{ booking.total_hours }}</p>
                <p style="margin:10px 0; font-size:16px; color:#495057;">
  <strong style="color:#2c3e50;">Original Room Cost:</strong>
  ₦{{ base_room_cost|floatformat:2|intcomma }}
</p>

{% if booking.discount_applied > 0 %}
<p style="margin:10px 0; font-size:16px; color:#495057;">
  <strong style="color:#2c3e50;">Discount Applied:</strong>
  -₦{{ booking.discount_applied|floatformat:2|intcomma }}
  ({{ discount_percentage|floatformat:1 }}% off)
</p>
{% endif %}

<p style="margin:10px 0; font-size:16px; color:#495057;">
  <strong style="color:#2c3e50;">Room Cost (after discount):</strong>
  ₦{{ final_room_cost|floatformat:2|intcomma }}
</p>

{% if booking.extras.exists %}
<div style="margin-top:15px; padding:15px; background-color:#e9ecef; border-radius:6px;">
  <p style="margin:5px 0; font-size:15px;">
    <strong style="color:#2c3e50;">Extras:</strong>
  </p>
  {% for extra in booking.extras.all %}
  <p style="margin:5px 0; font-size:15px; color:#495057;">
    {{ extra.name }}: ₦{{ extra.price|floatformat:2|intcomma }}
  </p>
  {% endfor %}
</div>
{% endif %}

<p style="margin:10px 0; font-size:16px; color:#495057;">
  <strong style="color:#2c3e50;">Hotel Revenue:</strong>
  ₦{{ hotel_revenue|floatformat:2|intcomma }}
</p>


              <p style="color:#495057; font-size:16px; margin:15px 0;">
                Thank you for using Hotel per Hour!
              </p>
            </td>
          </tr>
        </table>

        <!-- Footer -->
        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="border-top:1px solid #dee2e6; background-color:#f8f9fa; text-align:center;">
          <tr>
            <td style="padding:25px;">
              <p style="margin:5px 0; font-weight:600; color:#2c3e50;">Hotel per Hour Team</p>
              <p style="margin:5px 0; color:#6c757d; font-size:14px;">© 2025 Hotel per Hour. All rights reserved.</p>
              <p style="font-size:12px; margin-top:15px; color:#6c757d;">
                This email was sent regarding a booking notification. Please do not reply to this email.
              </p>
            </td>
          </tr>
        </table>

      </td>
    </tr>
  </table>
</body>
</html>